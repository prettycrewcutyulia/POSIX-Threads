# АВС ИДЗ №4

Индивидуальное домашнее задание №4 к курсу "Архитектура вычислительных систем"

**Исполнитель:** Гудошникова Юлия <br/>
**Группа:** БПИ-217 <br/>
**Вариант:** №31 <br/>

# Удачной проверки)

ИДЗ рассчитано на 7 баллов, далее подробно о каждом...

## 4 балла

### Условие задачи

Вторая задача об Острове Сокровищ. Шайка пиратов под предводительством Джона Сильвера высадилась на берег Острова Сокровищ. Не смотря на добытую карту старого Флинта, местоположение сокровищ по-прежнему остается загадкой, поэтому искать клад приходится практически на ощупь. Так как Сильвер ходит на деревянной ноге, то самому бродить по
джунглям ему не с руки. Джон Сильвер поделил остров на участки, а пиратов на небольшие группы. Каждой группе поручается искать клад на нескольких
участках, а сам Сильвер ждет на берегу. Группа пиратов, обшарив одну часть острова, переходит к другой, еще необследованной части. Закончив поиски, пираты возвращаются к Сильверу и докладывают о результатах. Требуется создать многопоточное приложение с управляющим потоком, моделирующее действия Сильвера и пиратов. При решении использовать парадигму портфеля задач.

### Модель вычисления

Взаимодействующие равные – модель, в которой исключен не занимающийся непосредственными вычислениями управляющий поток.

Используется портфель задач.
Остров представляет из себя поле NxN клеток. Команды пиратов (потоки) обращаются к разделенной переменной в которой указан порядок проверки клеток острова. 

[Источник данных](https://pro-prof.com/forums/topic/parallel-programming-paradigms)

### Входные данные

При запуске пользователь может передать через аргументы командной строки количество размер стороны острова (от 1 до 10) и количество команд пиратов (от 1 до 100).
Если аргументы не указаны, то программа запросит ввод данных параметров в консоль.
Если данные указаны неверно, то будут установлены стандартные значения.

### Консольное приложение

Приложение разработано на языке C, использована библиотека PThread.
Использованы мьютексы и конды.

### Результат работы программы
.\main.run
```
Не задан размер острова в аргументе запуска
Введите размер острова (от 1 до 10): 4
Создаём остров размером 4 на 4...
. . X X
. . . X
X . X .
. . X .
Не задано количество команд пиратов в аргументе запуска
Введите количество команд пиратов: 2
Команды пиратов отправляются исследовать остров.
Команда пиратов 0 исследует остров...
Команда пиратов 0 исследует клетку [0 0] (.) в течение 1 секунды
Команда пиратов 1 исследует остров...
Команда пиратов 1 исследует клетку [0 1] (.) в течение 1 секунды
Команда пиратов 0 исследует клетку [0 2] (X) в течение 1 секунды
Команда пиратов 1 исследует клетку [0 3] (X) в течение 1 секунды
Команда пиратов 0 исследует клетку [1 0] (.) в течение 1 секунды
Команда пиратов 1 исследует клетку [1 1] (.) в течение 1 секунды
Команда пиратов 0 исследует клетку [1 2] (.) в течение 1 секунды
Команда пиратов 1 исследует клетку [1 3] (X) в течение 1 секунды
Команда пиратов 0 исследует клетку [2 0] (X) в течение 1 секунды
Команда пиратов 1 исследует клетку [2 1] (.) в течение 1 секунды
Команда пиратов 0 исследует клетку [2 2] (X) в течение 1 секунды
Команда пиратов 1 исследует клетку [2 3] (.) в течение 1 секунды
Команда пиратов 0 исследует клетку [3 0] (.) в течение 1 секунды
Команда пиратов 1 исследует клетку [3 1] (.) в течение 1 секунды
Команда пиратов 0 исследует клетку [3 2] (X) в течение 1 секунды
Команда пиратов 1 исследует клетку [3 3] (.) в течение 1 секунды
Команда пиратов 0 закончила исследование острова.
Команда пиратов 1 закончила исследование острова.
Сокровищ найдено: 6 шт.
Сокровище 1: (0, 2)
Сокровище 2: (0, 3)
Сокровище 3: (1, 3)
Сокровище 4: (2, 0)
Сокровище 5: (2, 2)
Сокровище 6: (3, 2)
```

## 5 баллов

### Комментарии

Файл main.c, содержащий код программы содержит подробные комментарии.

### Сценарий поведения потоковых единиц

Каждый поток получает клетку для исследования из разделённой переменной до момента, пока все клетки острова не будут исследованы.

Когда поток начинает проверять клетку, он переводит очередь проверки клеток в разделенной переменной на следующую.
Далее поток проверяет содержание клетки, если в ней содержится сокровище, то сохраняет информацию об этом.
Когда все потоки (команды пиратов) завершают работу - главный поток выводит информацию о найденных сокровищах.

## 6 баллов

### Описание работы программы
На вход подаётся размер стороны квадратного острова и количество команд пиратов, которых Флинт отправляет исследовать остров.

Сокровища на острове автоматически генерируются с шансом в 30% в каждой клетке.
Сокровище помечается символом X, пустая клетка символом .

Далее Флинт (главный поток) отправляет команды пиратов (другие потоки)исследовать остров, разделённый на заданное количество клеток. Команды пиратов выполняют действия описанные выше в "Сценарии поведения потоковых единиц".

Когда все команды завершают проверку остров, они возвращаются к Флинту.
Флинт (главный поток) выводит информацию о найденных сокровищах.

### Ввод данных из командной строки

Ввод данных организован с помощью параметров командой строки. 
Первый параметр - сторона острова в клетках.
Второй параметр - количество команд пиратов (потоков).

## 7 баллов

### Ввод и вывод данных при помощи файлов

В программе реализован ввод и вывод из файла. Входной файл должен содержать два целых числа, удовлетворяющих условиям ввода, описанным выше (размер острова и количество команд пиратов)

Примеры входных данных находятся [здесь](./input/).
Примеры соотвествующих выходных данных находятся [здесь](./output/).
